%===========================================
% 
%===========================================

function [OB,err] = SimHead23NaCSF_v2f_Func(OB,INPUT)

Status2('busy','Create Head Object',2);
Status2('done','',3);

err.flag = 0;
err.msg = '';

%---------------------------------------------
% Input
%---------------------------------------------
ZF = INPUT.ZF;
clear INPUT;

%---------------------------------------------
% Setup
%---------------------------------------------
load('RS_MPRAGE_256','X');
whos

%---------------------------------------------
% Fiddle
%---------------------------------------------
X1 = X;
% X1(X<0.05) = 0;
% X1((X>=0.05)&(X<0.25)) = 145;
% X1(X>=0.25) = 0;
% X1(X<0.07) = 0;
% X1((X>=0.07)&(X<0.15)) = 145;
% X1(X>=0.15) = 0;
% X1(X<0.07) = 0;
% X1((X>=0.07)&(X<0.20)) = 145*OB.wgt;
% X1(X>=0.20) = 0;
X1(X<0.07) = 0;
X1((X>=0.07)&(X<0.25)) = 145*OB.wgt;
X1(X>=0.25) = 0;

%---------------------------------------------
% Test
%---------------------------------------------
Ob = zeros(ZF,ZF,ZF);
Ob(97:352,97:352,97:352) = X1;
  
%---------------------------------------------
% Return
%---------------------------------------------
OB.Ob = Ob;
OB.ObMatSz = ZF;
OB.name = 'HeadSimCSF';

%---------------------------------------------
% Panel Output
%--------------------------------------------- 
Panel(1,:) = {'',[],'Output'};
Panel(2,:) = {'ObFunc',OB.method,'Output'};
Panel(3,:) = {'Weighting',OB.wgt,'Output'};

PanelOutput = cell2struct(Panel,{'label','value','type'},2);
OB.PanelOutput = PanelOutput;

Status2('done','',2);
Status2('done','',3);

